# Code Review: LifeTrac v25 (Mechanical + Parametric + Load/Manufacturing)
**Reviewer:** GPT 5.2  
**Date:** January 9, 2026

## Scope
This review focuses on the v25 mechanical OpenSCAD design system (parametric automation + manufacturability) and the project’s stated weight/capacity calculations.

Primary artifacts reviewed:
- `mechanical_design/openscad/lifetrac_v25.scad` (assembly + lifting/structural/tipping calculations)
- `mechanical_design/openscad/lifetrac_v25_params.scad` (parameters + derived geometry)
- Key CNC parts: `openscad/parts/arm_plate.scad`, `side_panel.scad`, `wheel_mount.scad`, `platform_deck.scad`, `bucket_bottom.scad`, `bucket_side.scad`, `cylinder_lug.scad`
- Docs that state physical specs: `LifeTrac-v25/README.md`, `mechanical_design/SUMMARY.md`, `mechanical_design/REQUIREMENTS.md`, `mechanical_design/INTEGRATION.md`, `mechanical_design/STRUCTURAL_ANALYSIS.md`, `mechanical_design/STRUCTURAL_ANALYSIS_LOG.md`, `mechanical_design/documentation/PARTS_LIST.md`

## Executive Summary
### What’s strong
- The project has a real parametric backbone: key machine dimensions and linkages are computed (not merely drawn) and several parts (notably `side_panel.scad`) are genuinely self-adjusting.
- Structural analysis and stability/tipping calculations exist directly in the CAD (`lifetrac_v25.scad`), which is the right direction for keeping “specs” tied to geometry.

### High-priority issues to address
1. **Single Source of Truth violations are currently severe.** Several parameters that should be unique (pressure, cylinder sizes, bucket ground clearance, track width, etc.) conflict between:
   - docs (`README.md`, `mechanical_design/SUMMARY.md`, `INTEGRATION.md`, `REQUIREMENTS.md`)
   - `lifetrac_v25.scad`
   - `lifetrac_v25_params.scad`

   This is the #1 blocker for “trustable” automatic sizing and for ensuring the computed weight/capacity matches the physical machine.

2. **Hydraulic cylinder specs conflict across the project.** Examples:
   - Docs describe lift cylinders as **2.5" bore × 16" stroke**, bucket cylinders as **2" bore × 12" stroke**.
   - `lifetrac_v25.scad` uses **3000 PSI** and defines lift bore at **63.5 mm (2.5")** for the lifting force calculations.
   - `lifetrac_v25_params.scad` defines lift and bucket cylinders as **3" bore**, and bucket stroke as **18"**.

   These differences materially change calculated lifting force, cross-beam placement, and the claimed rated capacity.

3. **The automated structural analysis workflow reports “No structural analysis summary found.”** (`mechanical_design/STRUCTURAL_ANALYSIS_LOG.md`) even though `lifetrac_v25.scad` prints structured summary output. This breaks CI-based verification.

4. **CNC manufacturability: multiple CNC plate parts still have sharp outer corners and/or sharp internal corners where real steel profiles have radii.**
   - The cross-beam cutout in `arm_plate.scad` is a perfect rectangle (hard internal corners).
   - `bucket_bottom.scad` and `platform_deck.scad` use `cube()` plates (square outer corners) despite the project’s stated corner-radius standard.

5. **Some assemblies are explicitly “floating” / not yet mechanically mounted.** Example: `engine()` has an explicit TODO for mounting and is currently placed for visualization only.

## 1) Parametric Design & Automation (Goal: maximize automatic sizing/locating)
### Strengths
- **Derived geometry is real, not cosmetic:** `lifetrac_v25_params.scad` computes arm geometry and a derived `CROSS_BEAM_1_POS` based on bucket cylinder length constraints.
- **Auto-clearance modeling on the side panels is well done:** `side_panel.scad` uses an arc-slot sweep based on `ARM_MIN_ANGLE` → `ARM_MAX_ANGLE`, which is exactly the kind of “automatic locating” you want.

### Single Source of Truth problems (must fix)
Right now the project has multiple competing “truths” for the same parameters:
- `lifetrac_v25.scad` re-declares many of the same constants already defined in `lifetrac_v25_params.scad`.
- Some key design constraints exist in both files with different values (e.g., bucket ground clearance / front clearance, cylinder sizing, potentially track width references across docs).

This causes a specific failure mode:
- **Parts exported from `openscad/parts/*.scad` include `lifetrac_v25_params.scad`**.
- **The main assembly redefines values after including the params file**, meaning the assembly can look “right” while the exported CNC parts are dimensioned for a different design.

Concrete examples observed:
- `mechanical_design/SUMMARY.md` and `mechanical_design/INTEGRATION.md` state **2500 PSI** system pressure, while `LifeTrac-v25/README.md` and `lifetrac_v25.scad` use **3000 PSI**.
- `lifetrac_v25_params.scad` defines cylinders as **3" bore** (lift + bucket) and bucket stroke **18"**, while docs and `lifetrac_v25.scad` calculations target other values.

### Manual offsets undermine parametric intent
- `lifetrac_v25.scad` includes a manual cross-beam shift: `translate([0, CROSS_BEAM_1_POS - 76.2, 0])` (3" “alignment” nudge). This is a red flag: it typically means there’s a coordinate-frame mismatch between the *derived* position and the *modeled* connection geometry.

### Recommendations (parametric architecture)
**P0 (recommended structure): split “inputs” from “derived”**
- Create/standardize on:
  - a single “user input” config file (human-edited): machine width/length, pressure, cylinder bore/stroke, tubing choices, sheet thicknesses.
  - a single “derived geometry” file (computed): arm kinematics, cylinder mount points, cross-beam positions, bucket angles.
- Ensure **all parts and the assembly consume the same derived values**.

**P0: eliminate shadowing / duplication**
- Stop redefining key mechanical dimensions in `lifetrac_v25.scad` that already exist in the params/derived file.
- Keep assembly-only toggles (`show_*`, animation, exploded view) in the assembly file, but keep *geometry* in one place.

## 2) Weight, Capacity, and Consistency with Physical Dimensions
### Hydraulic lift capacity (what’s implemented)
`lifetrac_v25.scad` includes:
- cylinder force calculation using $F = P \times A$
- moment-arm based lift capacity using
  $$\text{Capacity} = \frac{F_{cyl,total} \cdot r_{cyl}(\theta)}{r_{load}(\theta)}$$

This is a solid first-order model.

### Major issue: inputs are inconsistent
Because pressure and cylinder bores/strokes conflict across docs and param files, the computed lift capacity cannot be assumed to match the intended physical cylinder selection.

Action: pick a single official set of hydraulic specs (pressure, bores, strokes, rod diameters, pin-to-pin lengths / dead lengths).

### Load geometry assumptions (needs refinement)
Current lift capacity logic uses a simplified load moment arm. In practice:
- the load is not applied at the arm pivot tip; it is forward of the bucket pivot (bucket depth + payload CG)
- bucket pose changes the load’s horizontal distance from the arm pivot

Recommendation:
- define a “rated load point” (e.g., bucket cutting edge, or payload CG at a specified distance forward of QA plate)
- compute moment arms using that explicit point, not just `ARM_LENGTH`.

### Tipping load / stability (what’s implemented)
`calculate_cog()` computes a tipping load about the front axle and then sets:
- **Rated Operating Capacity = 50% of tipping load** (ISO-style heuristic)

This is good to have, but it currently uses **hard-coded component masses** (frame, arms, bucket, wheel mass, fluids, operator). These will drift as the CAD changes.

Recommendation:
- move toward a geometry-derived mass model:
  - tube mass from length × cross-sectional area × density
  - plate mass from area × thickness × density
  - purchased components as explicit mass constants (engine, cylinders, motors)
- output a structured “mass breakdown” table in the console/log.

### Structural analysis status
`mechanical_design/STRUCTURAL_ANALYSIS.md` is currently stale (it still shows placeholders like `XXX kg`).
Also, `mechanical_design/STRUCTURAL_ANALYSIS_LOG.md` shows CI failing to detect the summary.

Recommendation:
- update the doc to reflect that the real summary is generated from `lifetrac_v25.scad`
- fix the CI/workflow parsing to match the actual output (or output a simpler machine-parseable block).

### Capacity reconciliation (must do)
Right now there are three “capacities” in play:
1) hydraulic lift capacity
2) tipping capacity
3) structural capacity (stress/deflection/pin/weld checks)

A robust “rated capacity” should be:
$$\text{Rated} = \min(\text{Hydraulic},\; \text{Tipping},\; \text{Structural})$$

…and each should be computed using the same geometry inputs.

## 3) Connectivity: parts not bolted/pinned/welded
### Confirmed “floating” / unspecified mounting
- `engine()` in `lifetrac_v25.scad` explicitly notes: “TODO: Design proper engine mounting plate and bolt pattern — Currently floating in space.”

### General recommendation
For each major subsystem (engine/pump/reservoir/valve manifold/controller box), create:
- a mount plate or bracket part with a known bolt pattern
- a clear “connects to” section in docs and a visible bolt-hole pattern in the CAD

This turns “visual placeholders” into buildable geometry.

## 4) CNC Best Practices & Hard Internal Corners
### Hard internal corners (high-impact)
- `openscad/parts/arm_plate.scad`: the cross-beam slot uses a `cube()` cutout with perfect 90° internal corners.
  - Real square/rectangular tubing has corner radii.
  - Plasma/laser/waterjet all have finite kerf radius.

Recommendation:
- add dogbone/relief features (or oversize the slot corners) so tubes fit without grinding.

### Outer corner radius compliance (multiple parts)
Project documentation states a standard corner radius, but several plates are still modeled as perfect rectangles:
- `openscad/parts/bucket_bottom.scad`: base plate is a `cube()` (square outer corners)
- `openscad/parts/platform_deck.scad`: base plate is a `cube()` (square outer corners)
- (Deprecated) `openscad/parts/standing_deck.scad`: also uses a `cube()`

Recommendation:
- use a single “plate perimeter” helper for all CNC plates (e.g., via `plate_steel.scad`) so the radius is consistent and centrally controlled.

### Manufacturing tolerance/kerf strategy
Current hole sizing often uses `+2mm` clearance, which is reasonable, but the project should standardize:
- clearance per bolt size (e.g., 1/2", 3/4", 1")
- minimum edge distance rules
- kerf compensation guidance (plasma vs laser)

## 5) Standardization Opportunities (bolts, plate, cylinders)
### Good existing standardization
- tubing and plate thicknesses are largely inch-standard (1/4", 1/2")
- bolt diameters are standardized in constants

### High-value standardization gaps
- **Hydraulic cylinders:** conflicting specs (2"/2.5" vs 3"; 12" vs 18") should be resolved and tied to actual purchasable SKUs or at least standard families.
- **Hydraulic pressure rating:** choose the system design pressure (2500 vs 3000) and document what component ratings assume (hose, valves, motor, cylinder seals).

Recommendation:
- define a small set of “allowed cylinder families” (bore/rod/stroke sets) and “allowed pin diameters,” and ensure the CAD + docs + BOM all reference the same.

## Priority Action Plan
### P0 — Trust and single source of truth
1) Choose official values for: system pressure, cylinder bores/strokes/rod diameters, track width, bucket ground clearance.
2) Remove duplicated/redeclared mechanical constants so parts + assembly use one source.
3) Remove the manual cross-beam shift by fixing the underlying coordinate/geometry mismatch.

### P1 — CNC buildability
4) Add corner relief/dogbones to tube-fit slots (starting with `arm_plate.scad`).
5) Ensure every CNC plate perimeter uses the standard corner radius (update `bucket_bottom.scad`, `platform_deck.scad`, and any other `cube()` plates).

### P1 — Physical connectivity completeness
6) Add explicit mounting geometry for currently “floating” subsystems (engine first).

### P2 — Weight/capacity integrity
7) Replace hard-coded mass estimates with geometry-derived mass where feasible; output a mass breakdown table.
8) Compute rated capacity as min(hydraulic, tipping, structural) using one shared set of inputs.

### P2 — CI verification
9) Fix the structural analysis workflow parsing (or emit a machine-parseable summary block) so CI can continuously validate the design.
